@model WorkTrackingSystem.Models.Baselineassessment

@{
    ViewData["Title"] = "Chi tiết đánh giá cơ bản";
    Layout = "~/Areas/ProjectManager/Views/Shared/_ProjectManager.cshtml";
}

<div class="">
    <h1 class="mb-4 text-primary fw-bold">Chi tiết đánh giá cơ bản</h1>
    
    <div class="card shadow-lg p-4">
        <div class="row">
            <div class="col-md-8">
                <dl class="row fs-5">
                    <dt class="col-sm-4 fw-bold"><i class="bi bi-person"></i> Nhân viên:</dt>
                    <dd class="col-sm-8 fw-bold text-info">
                        @Html.DisplayFor(model => model.Employee.Code) -
                        @Html.DisplayFor(model => model.Employee.FirstName)
                        @Html.DisplayFor(model => model.Employee.LastName)
                    </dd>
                    <dt class="col-sm-4 fw-bold"><i class="bi bi-bar-chart-line"></i> Đánh giá khối lượng:</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.VolumeAssessment)</dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-graph-up"></i> Đánh giá tiến độ:</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.ProgressAssessment)</dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-star"></i> Đánh giá chất lượng:</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.QualityAssessment)</dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-chat-left-text"></i> Tóm tắt đánh giá:</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.SummaryOfReviews)</dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-clock"></i> Tháng:</dt>
                    <dd class="col-sm-8 text-primary fw-bold">
                        @(Model.Time.HasValue ? Model.Time.Value.ToString("MM/yyyy") : "Không có dữ liệu")
                    </dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-clipboard-check"></i> Đánh giá:</dt>
                    <dd class="col-sm-8">@(Model.Evaluate == true ? "Đạt" : "Chưa đạt")</dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-trash"></i> Trạng thái xóa:</dt>
                    <dd class="col-sm-8">
                        @(Model.IsDelete.HasValue ? (Model.IsDelete.Value ? "Đã xóa" : "Chưa xóa") : "Không xác định")
                    </dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-check-circle"></i> Hoạt động:</dt>
                    <dd class="col-sm-8">
                        @(Model.IsActive.HasValue ? (Model.IsActive.Value ? "Hoạt động" : "Chưa hoạt động") : "Không xác định")
                    </dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-calendar-plus"></i> Ngày tạo:</dt>
                    <dd class="col-sm-8">@Model.CreateDate?.ToString("dd/MM/yyyy HH:mm")</dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-calendar-check"></i> Ngày cập nhật:</dt>
                    <dd class="col-sm-8">@Model.UpdateDate?.ToString("dd/MM/yyyy HH:mm")</dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-person-plus"></i> Người tạo:</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.CreateBy)</dd>

                    <dt class="col-sm-4 fw-bold"><i class="bi bi-person-check"></i> Người cập nhật:</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.UpdateBy)</dd>


                </dl>
            </div>
            <div class="col-md-4"><canvas id="assessmentChart" width="100" height="100"></canvas></div>
        </div>
        
    </div>

    <div class="mt-4">
        <a asp-action="Edit" asp-route-id="@Model?.Id" class="btn btn-warning btn-lg">
            <i class="bi bi-pencil-square"></i> Sửa
        </a>
        <a asp-action="Index" class="btn btn-secondary btn-lg">
            <i class="bi bi-arrow-left"></i> Quay lại danh sách
        </a>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var ctx = document.getElementById('assessmentChart').getContext('2d');

        var chartData = {
            labels: ["Khối lượng", "Tiến độ", "Chất lượng"],
            datasets: [{
                data: [@Model.VolumeAssessment, @Model.ProgressAssessment, @Model.QualityAssessment], // Dữ liệu từ Model
                backgroundColor: ["#FF6384", "#36A2EB", "#FFCE56"], // Màu sắc cho từng phần
                hoverBackgroundColor: ["#FF4563", "#2184D8", "#FFC233"]
            }]
        };

        var myPieChart = new Chart(ctx, {
            type: 'pie',
            data: chartData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    });
</script>